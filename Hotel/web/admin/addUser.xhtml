<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">
    <ui:composition template="adminLTE.xhtml">
        <ui:define name="body">
            <!-- Main content -->
            <!-- /.content -->
            <section class="content">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="box">
                            <div class="box-header">
                                <h4 class="box-title">Add User</h4>
                            </div>
                            <div class="box-body">
                                <h:form id="addUserForm" role="form">
                                    <div class="box-body">
                                        <b:growl id="usernameError" for="username" />
                                        <b:growl id="firstNameError" for="firstName" />
                                        <b:growl id="lastNameError" for="firstName" />
                                        <b:messages id="emailError" for="email" />
                                        <b:growl id="phoneError" for="phone" />
                                        <b:growl id="passwordError" for="password" />
                                        <b:growl id="roleError" for="role"  />
                                        <b:growl id="addedinfo" />
                                        <div class="form-group col-xs-4">
                                            <label for="">Username*</label>
                                            <b:inputText id="username" class="form-control" value = "#{userManageBean.user.username}" 
                                                         requiredMessage="username can not be none!" required="true"> 

                                            </b:inputText>
                                        </div>
                                        <div class="form-group col-xs-4">
                                            <label for="">First Name</label>
                                            <b:inputText id="firstName" class="form-control" value = "#{userManageBean.user.firstName}" validatorMessage="First Name can only contains letters!">
                                                <f:validateRegex pattern="[a-z]*[A-Z]*" />
                                            </b:inputText>

                                        </div>
                                        <div class="form-group col-xs-4">
                                            <label for="">Last Name</label>
                                            <b:inputText id="lastName" class="form-control" value = "#{userManageBean.user.lastName}" validatorMessage="Last Name can only contains letters!">  
                                                <f:validateRegex pattern="[a-z]*[A-Z]*" />
                                            </b:inputText>
                                        </div>
                                        <div class="form-group col-xs-4" >
                                            <label for="">Password*</label>
                                            <b:inputSecret id="password" class="form-control" value = "#{userManageBean.user.password}" required="true" requiredMessage="Password can not be none!">
                                                <!--<f:validateRegex pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})" />-->
                                            </b:inputSecret>
                                        </div>
                                        <div class="form-group col-xs-4">
                                            <label for="">Email*</label>
                                            <b:inputText id="email" class="form-control" value = "#{userManageBean.user.email}" required="true" 
                                                         requiredMessage="Email can not be none!" validator="#{userManageBean.validateEmail}">  
                                                <f:ajax event="keyup" render="emailError"/>
                                            </b:inputText>
                                        </div>
                                        <div class="form-group col-xs-4" >
                                            <label for="">Phone</label>
                                            <b:inputText id="phone" class="form-control" value = "#{userManageBean.user.phone}" validatorMessage="Invalide phone number!"> 
                                                <f:validateRegex pattern="({0})|([9][0-9]{8})|([0][0-9]{9})"  />
                                            </b:inputText>
                                        </div>


                                        <div class="form-group col-xs-4">
                                            <label for="">Country</label>
                                            <b:inputText  class="form-control" value = "#{userManageBean.user.country}" /> 
                                        </div>
                                        <div class="form-group col-xs-4">
                                            <label for="">City</label>
                                            <b:inputText  class="form-control" value = "#{userManageBean.user.city}" /> 
                                        </div>
                                        <div class="form-group col-xs-4">
                                            <label for="">Street</label>
                                            <b:inputText  class="form-control" value = "#{userManageBean.user.street}" /> 
                                        </div>
                                        <div class="form-group col-xs-4">
                                            <label for="">Postcode</label>
                                            <b:inputText  class="form-control" value = "#{userManageBean.user.postCode}" /> 
                                        </div>

                                        <div class="form-group col-xs-4">
                                            <label>Role*</label>
                                            <b:selectOneMenu class="form-control" id="role" value="#{userManageBean.user.userType}" style="height: 34px"  required="true" requiredMessage="Must select one role!">
                                                <f:selectItem itemValue="" itemLabel="--select--" />
                                                <f:selectItem itemValue="admin" itemLabel="admin" />
                                                <f:selectItem itemValue="customer" itemLabel="customer" />
                                                <f:validateRegex pattern="[a-z]+"/>
                                            </b:selectOneMenu>  
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <b:button class="btn btn-default pull-left" href="customer.xhtml" value="Back"></b:button>
                                        <b:commandButton value = "Save"  class="btn btn-primary" action = "#{userManageBean.addUser()}">
                                        </b:commandButton>
                                    </div>
                                </h:form>

                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </ui:define>
    </ui:composition>
</html>

